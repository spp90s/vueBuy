<template>
  <div>
    <div class="section">
      <div class="location">
        <span>å½“å‰ä½ç½®ï¼š</span>
        <a href="#/" class="router-link-active">é¦–é¡µ</a> &gt;
        <a
          href="#/site/goodslist"
          class="router-link-exact-active router-link-active"
          >è´­ç‰©å•†åŸ</a
        >
      </div>
    </div>
    <!-- é¡¶éƒ¨åŒºåŸŸï¼ˆå·¦ä¾§åˆ†ç±»åˆ—è¡¨ã€è½®æ’­å›¾ã€çƒ­å–ï¼‰ -->
    <div class="section">
      <div class="wrapper">
        <div class="wrap-box">
          <!-- å¾ªç¯ç”Ÿæˆåˆ†ç±»åŒºåŸŸ -->
          <div class="left-220" style="margin: 0px">
            <div class="banner-nav">
              <ul>
                <li v-for="(item, index) in catelist" :key="item.id">
                  <h3>
                    <i class="iconfont icon-arrow-right"></i>
                    <span>{{ item.title }}</span>
                    <p>
                      <span
                        v-for="(subItem, subIndex) in item.subcates"
                        :key="subItem.id"
                        >{{ subItem.title }}&nbsp;</span
                      >
                      <!-- <span>æ‘„å½±æ‘„åƒ&nbsp;</span> -->
                      <!-- <span>å­˜å‚¨è®¾å¤‡&nbsp;</span> -->
                    </p>
                  </h3>
                  <div class="item-box">
                    <dl>
                      <dt>
                        <a href="/goods/40.html">{{ item.title }}</a>
                      </dt>
                      <dd>
                        <a
                          v-for="(subItem, sinIndex) in item.subcates"
                          :key="subItem.id"
                          href="/goods/43.html"
                          >{{ subItem.title }}</a
                        >
                        <!-- <a href="/goods/43.html">æ‘„å½±æ‘„åƒ</a> -->
                        <!-- <a href="/goods/43.html">å­˜å‚¨è®¾å¤‡</a> -->
                      </dd>
                    </dl>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <!--å¹»ç¯ç‰‡ è½®æ’­å›¾ -->
          <div class="left-705">
            <div class="banner-img">
              <div id="focus-box" class="focus-box">
                <!-- element-uiçš„èµ°é©¬ç¯ç»„ä»¶ -->
                <el-carousel height="341px">
                  <el-carousel-item v-for="item in sliderlist" :key="item.id">
                    <!-- <h3>{{ item }}</h3> -->
                    <a href="#">
                      <img
                        style="display: block; height: 100%"
                        :src="item.img_url"
                        alt=""
                      />
                    </a>
                  </el-carousel-item>
                </el-carousel>
              </div>
            </div>
          </div>
          <!--/å¹»ç¯ç‰‡ çƒ­å– -->
          <div class="left-220">
            <ul class="side-img-list">
              <li v-for="(item, index) in toplist" :key="item.id">
                <div class="img-box">
                  <label>{{ index + 1 }}</label>
                  <img :src="item.img_url" />
                </div>
                <div class="txt-box">
                  <a href="/goods/show-98.html">{{ item.title }}</a>
                  <!-- è¯·æ±‚å›æ¥çš„æ•°æ®ä¸­æ—¥æœŸæ ¼å¼éœ€è¦vueè¿‡æ»¤å™¨å¤„ç†ä¸€ä¸‹ï¼ˆåŒèŠ±æ‹¬å·æ’å€¼ï¼‰ï¼Œå†èµ‹å€¼ç»™ç»„ä»¶ -->
                  <span>{{ item.add_time | beautifyTime }}</span>
                  <!-- è¿‡æ»¤å™¨æ˜¯ JavaScript å‡½æ•°ï¼Œå› æ­¤å¯ä»¥æ¥æ”¶å‚æ•° -->
                  <!-- <span>{{item.add_time | beautifyTime('ğŸ®', 'ğŸš€', 'ğŸ›¸')}}</span> -->
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!-- å¾ªç¯ç”Ÿæˆåº•éƒ¨åŒºåŸŸï¼ˆæ‰‹æœºæ•°ç ã€ç”µè„‘åŠå…¬ã€å½±éŸ³å¨±ä¹ã€æœè£…ç±»ï¼‰ -->
    <div
      class="section"
      v-for="(item, index) in orderList"
      :key="item.level1cateid"
    >
      <div class="main-tit">
        <h2>{{ item.catetitle }}</h2>
        <p>
          <a
            v-for="(level2Item, level2Index) in item.level2catelist"
            :key="level2Item.subcateid"
            href="/goods/43.html"
            >{{ level2Item.subcatetitle }}</a
          >
          <!-- <a href="/goods/43.html">æ‘„å½±æ‘„åƒ</a> -->
          <a href="/goods/40.html">æ›´å¤š<i>+</i></a>
        </p>
      </div>
      <div class="wrapper clearfix">
        <div class="wrap-box">
          <ul class="img-list">
            <li
              v-for="(datasItem, dataIndex) in item.datas"
              :key="datasItem.artID"
            >
              <!-- <a href="#/site/goodsinfo/87" class=""> -->
              <!-- å› ä¸ºæ˜¯åŠ¨æ€è·¯ç”±åŒ¹é…ï¼Œéœ€è¦v-bind:to -->
              <router-link :to="'/detail/' + datasItem.artID">
                <div class="img-box">
                  <!-- <img :src="datasItem.img_url"> -->
                  <!-- ä½¿ç”¨æ‡’åŠ è½½çš„æŒ‡ä»¤ -->
                  <img v-lazy="datasItem.img_url" />
                </div>
                <div class="info">
                  <h3>{{ datasItem.artTitle }}</h3>
                  <p class="price">
                    <b>{{ datasItem.sell_price }}</b
                    >å…ƒ
                  </p>
                  <p>
                    <strong>åº“å­˜ {{ datasItem.stock_quantity }}</strong>
                    <span
                      >å¸‚åœºä»·ï¼š
                      <s>{{ datasItem.market_price }}</s>
                    </span>
                  </p>
                </div>
              </router-link>
              <!-- </a> -->
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
// åœ¨å“ªç”¨ï¼Œå°±åœ¨å“ªå„¿å¯¼å…¥axios
// import axios from "axios";
// å¯¼å…¥axiosæŠ½å–åˆ°å…¨å±€ è¿ç§»åˆ°main.jsä¸­ï¼Œä¸ºäº†è®©å…¨å±€ä½¿ç”¨

// å‘è¯·æ±‚ï¼Œè·å–æ•°æ®
// axios.get('http://111.230.232.110:8899/site/goods/gettopdata/goods').then(response => {
//     console.log(response);
//     // è®¾ç½®ç»™ç»„ä»¶ä¸­çš„dataä¸­çš„æ•°æ®
//     console.log(this);  //undefined è¯´æ˜å†™åœ¨è¿™é‡Œçš„axiosçš„å›è°ƒå‡½æ•°é‡Œæ‹¿ä¸åˆ°å½“å‰è¿™ä¸ªindexç»„ä»¶
// })

// å¯¼å…¥moment.js
// import moment from "moment"; //è¿ç§»åˆ°main.jsä¸­

// ç±»ä¼¼äºmodule.exports
export default {
  name: "index",
  data: function () {
    return {
      // message: 'haha'
      // åˆ†ç±»åˆ—è¡¨
      catelist: [],
      // è½®æ’­å›¾
      sliderlist: [],
      // çƒ­å–åˆ—è¡¨
      toplist: [],

      // åº•éƒ¨åˆ†ç±»åˆ—è¡¨
      orderList: [],
    };
  },
  // åœ¨ä¸€ä¸ªç»„ä»¶çš„é€‰é¡¹ä¸­å®šä¹‰æœ¬åœ°çš„è¿‡æ»¤å™¨ï¼ˆå±€éƒ¨ï¼‰
  // filters: {
  //     beautifyTime: function(value, para2, para3, para4) {
  //         console.log(para2);
  //         console.log(para3);
  //         console.log(para4);
  //         // å¤„ç†ä¹‹å‰ï¼Œç¬¬ä¸€ä¸ªå‚æ•°valueå°±æ˜¯æ¥æ”¶è¦è¿‡æ»¤çš„å€¼ï¼Œå³æ¨¡æ¿åŒèŠ±æ‹¬å·æ’å€¼ä¸­ | å‰é¢å†™è¦è¿‡æ»¤çš„æ•°æ®
  //         // if (!value) return ''
  //         // value = value.toString()
  //         console.log(value);
  //         // è¿”å›å¤„ç†ä¹‹åçš„value
  //         // return value.charAt(0).toUpperCase() + value.slice(1)
  //         // return 'ğŸ–ğŸ–ğŸ–ğŸ–';
  //         // éœ€è¦ç”¨moment.jsæ¥æ ¼å¼åŒ–æ—¥æœŸï¼Œå†è¿”å›
  //         // return moment(value).format("YYYYå¹´MMæœˆDDæ—¥");
  //         return moment(value).format(`YYYY${para2}MM${para3}DD${para4}`);
  //     }
  // },
  // methods: {
  //     // éœ€è¦æ‰‹åŠ¨è°ƒç”¨
  // },
  // computed: {
  //     // éœ€è¦é¡µé¢å»{æŒ–å‘}
  // }
  // ä¸Šé¢ä¸¤ç§æ–¹å¼éƒ½ä¸å¥½ï¼Œç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆç”Ÿå‘½å‘¨æœŸé’©å­çš„ this ä¸Šä¸‹æ–‡æŒ‡å‘è°ƒç”¨å®ƒçš„ Vue å®ä¾‹ï¼‰
  beforeCreate() {
    // åˆ›å»ºVueå®ä¾‹ä¹‹å‰
    console.log("beforeCreate");
    // console.log(this.message);
  },
  created() {
    // åˆ›å»ºVueå®ä¾‹å®Œæ¯•ï¼ˆVueå®ä¾‹åˆ›å»ºå®Œæ¯•æ‰å¯ä»¥è®¿é—®åˆ°vueç»„ä»¶ä¸­çš„å†…å®¹ï¼‰
    console.log("created");
    // console.log(this.message);

    // å‘è¯·æ±‚ï¼Œè·å–é¡¶éƒ¨æ•°æ®
    this.$axios.get("site/goods/gettopdata/goods").then((response) => {
      // console.log(response);
      // è®¾ç½®ç»™ç»„ä»¶ä¸­çš„dataä¸­çš„æ•°æ®
      console.log(this); //VueComponent è¯´æ˜å†™åœ¨è¿™é‡Œçš„axiosçš„å›è°ƒå‡½æ•°é‡Œæ‹¿åˆ°äº†å½“å‰è¿™ä¸ªindexç»„ä»¶
      this.catelist = response.data.message.catelist;
      this.sliderlist = response.data.message.sliderlist;
      // è¯·æ±‚å›æ¥çš„æ•°æ®ä¸­æ—¥æœŸæ ¼å¼éœ€è¦Vueè¿‡æ»¤å™¨filterså¤„ç†ä¸€ä¸‹ï¼ˆåŒèŠ±æ‹¬å·æ’å€¼ï¼‰ï¼Œåœ¨èµ‹å€¼ç»™ç»„ä»¶
      this.toplist = response.data.message.toplist;
    });
    // å‘è¯·æ±‚ï¼Œè·å–åº•éƒ¨æ•°æ®
    this.$axios.get("site/goods/getgoodsgroup").then((response) => {
      // console.log(response);
      // è®¾ç½®ç»™ç»„ä»¶ä¸­çš„dataä¸­çš„æ•°æ®
      this.orderList = response.data.message;
    });
  },
};
</script>

<style>
</style>